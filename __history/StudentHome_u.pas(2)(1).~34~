unit StudentHome_u;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.CheckLst, Vcl.ComCtrls,
  Vcl.ExtCtrls, Data.DB, Vcl.Grids, Vcl.DBGrids, dm_u, Vcl.Mask, Vcl.DBCtrls;

type
  TfrmStudentHome = class(TForm)
    clbCourses: TCheckListBox;
    btnSaveEnrollments: TButton;
    btnEditEnroll: TButton;
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    pnlEnrollments: TPanel;
    dbgPastAttempts: TDBGrid;
    DBEdit1: TDBEdit;
    DBNavigator1: TDBNavigator;
    DBEdit2: TDBEdit;
    btnEditEnrollments: TButton;
    procedure btnSaveEnrollmentsClick(Sender: TObject);
    procedure btnEditEnrollClick(Sender: TObject);
    procedure btnEditEnrollmentsClick(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmStudentHome: TfrmStudentHome;

implementation
uses Main_u;
{$R *.dfm}

procedure TfrmStudentHome.btnSaveEnrollmentsClick(Sender: TObject);
begin
{if ChecklistBox1.Checked[1] then
  begin
    Showmessage('it is checked!');
  end;} //how to check if an item is checked!

//remove enrollment entries for all unselected items, adds enrollment for selected items
pnlEnrollments.Visible:= False;
end;

procedure TfrmStudentHome.btnEditEnrollmentsClick(Sender: TObject);
begin
pnlEnrollments.Visible:= True;
//load currently enrolled courses COULD BE IMPROVED ON!!
  //loop through educators, appending each subject to checklistbox
  //make query that gets current user's Enrollments
  //loop through enrolls, grab name from educators table and check against clb
    //if found, check that item in the lb, as it is an enrolled course
end;

procedure TfrmStudentHome.FormShow(Sender: TObject);
begin
dbgPastAttempts.DataSource:= dscQuery;
Query.Close;
Query.SQL.Clear;
Query.SQL.Add('SELECT qQuizName, aScore, aFeedback FROM tblQuizzes, tblAttempts ');
Query.SQL.Add('WHERE (aUser='+ IntToStr(iStudentID) +') AND (qQuizID = aQuiz);');
Query.ExecSQL;
Query.Open;

dbgPastAttempts.Columns[0].Title.Caption:= 'Quiz';
dbgPastAttempts.Columns[1].Title.Caption:= 'Score Achieved';
dbgPastAttempts.Columns[2].Title.Caption:= 'Quiz Feedback';
{DBGrid1.DataSource:= dscAttempts;   //example test stuff
DBGrid1.Columns[0].Visible:= False;
DBGrid1.Columns[3].Width:= 40;
DBEdit1.DataSource:= dscAttempts;
DBEdit2.DataSource:= dscAttempts;
DBNavigator1.DataSource:= dscAttempts;
DBEdit1.DataField:= 'aQuiz';
DBEdit2.DataField:= 'aUser';}
end;

procedure TfrmStudentHome.btnEditEnrollClick(Sender: TObject);
begin
{if PageControl1.Visible = True then
  begin
    PageControl1.Visible:= False;
    CheckListBox1.Visible:= True;
    btnSaveEnrollments.Visible:= True;
  end else
  begin
    pageControl1.visible:= true;
    checklistbox1.visible:= false;
    btnSaveEnrollments.visible:= false;
  end; }
end;

end.
